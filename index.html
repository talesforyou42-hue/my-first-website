<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Writer Visual Tool</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== GLOBAL ===== */
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  color:#222;
}

header{
  text-align:center;
  padding:2rem 1rem;
  background:linear-gradient(90deg,#667eea,#764ba2);
  color:#fff;
}

section{
  background:#fff;
  margin:1.5rem auto;
  padding:1.5rem;
  max-width:900px;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}

h2{
  margin-top:0;
  color:#764ba2;
}

label{font-weight:bold}

input, textarea, select{
  width:100%;
  padding:10px;
  margin-top:6px;
  margin-bottom:14px;
  border-radius:8px;
  border:1px solid #ccc;
}

button{
  padding:12px 20px;
  border:none;
  border-radius:25px;
  background:linear-gradient(90deg,#ff758c,#ff7eb3);
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
button:hover{opacity:.9}

ul{padding-left:20px}
li{cursor:pointer;margin:6px 0}
li:hover{color:#ff758c}

.prompt-box{
  background:#f3f3f3;
  padding:14px;
  border-radius:10px;
  white-space:pre-wrap;
}

#loading{font-style:italic;color:#666}
#image{
  display:none;
  margin-top:15px;
  max-width:100%;
  border-radius:14px;
}
</style>
</head>

<body>

<header>
<h1>Writer Visual Tool</h1>
<p>Prompt → Wait → Image (same page)</p>
</header>

<!-- CHARACTER CREATOR -->
<section>
<h2>Character Creator</h2>

<label>Character Name</label>
<input id="char-name" placeholder="Asha">

<label>Character Identity (face & vibe in simple words)</label>
<textarea id="char-desc"
placeholder="Manhwa style adult woman, long hair, calm seductive face"></textarea>

<button id="save-character">Save Character</button>
</section>

<!-- SCENE BUILDER -->
<section>
<h2>Scene Builder</h2>

<label>Expression</label>
<select id="expression">
<option>Neutral</option>
<option>Smile</option>
<option>Seductive</option>
<option>Angry</option>
<option>Shy</option>
</select>

<label>Intensity</label>
<select id="intensity">
<option>Low</option>
<option>Medium</option>
<option>High</option>
</select>

<label>Location</label>
<input id="location" placeholder="Bedroom">

<label>Time</label>
<select id="time">
<option>Day</option>
<option>Night</option>
</select>

<label>Mood</label>
<input id="mood" placeholder="Quiet, intimate, tense">

<button id="generate">Generate Image</button>

<p id="loading"></p>
<img id="image">
</section>

<!-- OUTPUT -->
<section>
<h2>Final Prompt</h2>
<div id="final-prompt" class="prompt-box">No prompt yet.</div>
</section>

<!-- LIST -->
<section>
<h2>Saved Characters</h2>
<ul id="list"></ul>
</section>

<script>
/* ===== STORAGE ===== */
const getChars=()=>JSON.parse(localStorage.getItem("chars"))||[];
const saveChars=c=>localStorage.setItem("chars",JSON.stringify(c));

/* ===== SAVE CHARACTER ===== */
document.getElementById("save-character").onclick=()=>{
  const name=document.getElementById("char-name").value.trim();
  const desc=document.getElementById("char-desc").value.trim();

  if(!name||!desc){alert("Fill both fields");return;}

  const chars=getChars();
  if(chars.some(c=>c.name.toLowerCase()===name.toLowerCase())){
    alert("Character name already exists");
    return;
  }

  chars.push({name,desc});
  saveChars(chars);
  document.getElementById("char-name").value="";
  document.getElementById("char-desc").value="";
  render();
};

/* ===== RENDER LIST ===== */
let active=null;
const list=document.getElementById("list");
function render(){
  list.innerHTML="";
  getChars().forEach(c=>{
    const li=document.createElement("li");
    li.textContent=c.name;
    li.onclick=()=>active=c;
    list.appendChild(li);
  });
}
render();

/* ===== GENERATE IMAGE (DEMO) ===== */
document.getElementById("generate").onclick=()=>{
  if(!active){alert("Select character");return;}

  const prompt=`
Manhwa style illustration,
${active.name},
${active.desc},
expression ${expression.value} (${intensity.value}),
${location.value}, ${time.value},
mood ${mood.value},
high quality, clean lines
`.trim();

  document.getElementById("final-prompt").textContent=prompt;

  loading.textContent="Generating image…";
  image.style.display="none";

  setTimeout(()=>{
    image.src="https://placekitten.com/768/768";
    image.style.display="block";
    loading.textContent="";
  },2000);
};
</script>

</body>
</html>
